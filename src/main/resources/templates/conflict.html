<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Conflict Warning</title>
    <link th:href="@{https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css}" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/css/conflict.css}">
    <link rel="stylesheet" href="/css/header.css">
</head>

<body>
    <div th:insert="~{header :: header}"></div>
    <div class="conflict-box">
        <h2>Conflict Warning</h2>
        <div>You already have an appointment at this time.</div>
        <div class="conflict-info old-appt">
            <div id="conflictDiv" th:data-conflictapp="${conflictAppoint.id}"></div>
            <div id="appointnameDiv" th:data-appointname="${appoint.name}"></div>
            <div id="appointStartDiv" th:data-appointstart="${appoint.startTime}"></div>
            <div id="appointEndDiv" th:data-appointend="${appoint.endTime}"></div>
            <div id="appointLocationDiv" th:data-appointlocation="${appoint.location}"></div>

            <b>Existing appointment:</b><br>
            <span id="conflict-title" class="old-title" th:text="${conflictAppoint.name}">Design Review</span><br>
            <span id="conflict-time" class="old-time" th:text="'Start time:'+${conflictAppoint.startTime}">2025-05-23
                09:00 - 10:00</span><br>
            <span class="old-time" th:text="'End time:'+${conflictAppoint.endTime}">2025-05-23 09:00 - 10:00</span><br>
            <span id="conflict-location" class="old-location"
                th:text="'Location:'+${conflictAppoint.location}">Conference Room</span>
        </div>
        <div class="conflict-info new-appt">
            <b>New appointment you want to add:</b><br>
            <span id="new-title" class="new-title" th:text="${appoint.name}">Project Meeting</span><br>
            <span id="new-time" class="new-time" th:text="'Start time:'+${appoint.startTime}">2025-05-23 09:00 -
                10:00</span><br>
            <span class="old-time" th:text="'End time:'+${appoint.endTime}">2025-05-23 09:00 - 10:00</span><br>
            <span id="new-location" class="new-location" th:text="'Location:'+${appoint.location}">Room 101</span>
        </div>
        <script>
            const conflictAppId = document.getElementById('conflictDiv').dataset.conflictapp;
            const appointName = document.getElementById('appointnameDiv').dataset.appointname;
            const appointStart = document.getElementById('appointStartDiv').dataset.appointstart;
            const appointEnd = document.getElementById('appointEndDiv').dataset.appointend;
            const appointLocation = document.getElementById('appointLocationDiv').dataset.appointlocation;


        </script>
        <div class="btn-group">
            <button class="btn-conflict" onclick="window.history.back()">Choose Another Time</button>
            <button
                onclick="window.location.href = '/user/replace?conflictAppId=' + conflictAppId + '&appName=' + appointName + '&startTime=' + appointStart + '&endTime=' + appointEnd + '&location=' + appointLocation">
                Replace Existing
            </button>


        </div>
    </div>
    <script th:src="@{/js/conflict.js}"></script>
    <script src="/js/header.js"></script>
</body>

</html>